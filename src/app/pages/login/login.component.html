<div class="contenedor-login" *ngIf="!mostrarOlvido">

<form [formGroup]="formularioLogin" (ngSubmit)="IniciarSesion()">
  <!-- Datos generales -->
  <mat-card class="mb-4">
    <mat-card-title>Inicio de sesion</mat-card-title>
    <mat-card-content>
      <div class="row g-3">
        <mat-form-field class="col-md-3">
          <mat-label>Usuario</mat-label>
          <input matInput formControlName="usuario" placeholder="usuario" />
          <mat-error *ngIf="hasError('usuario', 'required')">El usuario es requerido.</mat-error>
          <mat-error *ngIf="hasError('usuario', 'minlength')">El nombre debe tener al menos 2 caracteres.</mat-error>
        </mat-form-field>

        <mat-form-field class="col-md-2">
          <mat-label>Contraseña</mat-label>
          <input matInput [type]="hide ? 'password' : 'text'" formControlName="contraseña" placeholder="contraseña" />
        <button mat-icon-button matSuffix 
          type="button"
          (click)="hide = !hide" 
          [attr.aria-label]="'Mostrar contraseña'" 
          [attr.aria-pressed]="!hide">
          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
          <mat-error *ngIf="hasError('contraseña', 'required')">La contraseña es requerida.</mat-error>
          <mat-error *ngIf="hasError('contraseña', 'minlength')">La contraseña debe tener al menos 2 caracteres.</mat-error>
        </mat-form-field>
        </div>

       <div class="olvido-contrasena">
        <a (click)="olvidoContrasena()">¿Olvidaste tu contraseña?</a>
        </div>

    </mat-card-content>
  </mat-card>

    <!-- Acciones -->
  <div style="display: flex; justify-content: flex-end">
    <button mat-stroked-button type="submit" (click)="IniciarSesion()">
      Iniciar sesion
    </button>
  </div>
</form>
</div>

<div class="contenedor-recuperar" *ngIf="mostrarOlvido">
  <form [formGroup]="formularioRecuperar" (ngSubmit)="recuperarContrasena()">
    <mat-card>
      <mat-card-title>Recuperar contraseña</mat-card-title>
      <mat-card-content>
        <mat-form-field appearance="fill">
          <mat-label>Usuario</mat-label>
          <input matInput formControlName="usuario" placeholder="Tu usuario" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Correo electronico</mat-label>
          <input matInput type="email" formControlName="correo" placeholder="Tu correo electronico" />
        </mat-form-field>
      </mat-card-content>
    </mat-card>

   <div style="display: flex; justify-content: space-between; margin-top: 1rem;">
      <button mat-stroked-button color="warn" type="button" (click)="volverLogin()">Volver</button>
      <button mat-stroked-button color="primary" type="button" (click)="recuperarContrasena()">Recuperar</button>
    </div>
  </form>
</div>
